<!--
  Generated template for the BusDetailPage page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-navbar *navbar>
  <ion-title>BusDetail</ion-title>
</ion-navbar>

<ion-content class="bus-detail">
  <ion-segment [(ngModel)]="busViewType">
    <ion-segment-button value="information">
      Information
    </ion-segment-button>
    <ion-segment-button value="position">
      Position
    </ion-segment-button>
  </ion-segment>

  <div [ngSwitch]="busViewType" class="container">
    <div class="info" *ngSwitchWhen="'information'">
      <ion-item detail-none>
        {{'BUS_DETAIL_PAGE.Line' | translate}}
        <ion-note item-right>{{bus?.lineId}}</ion-note>
      </ion-item>
      <ion-item detail-none>
        {{'BUS_DETAIL_PAGE.Color' | translate}}
        <ion-note item-right>{{bus?.color}}</ion-note>
      </ion-item>
      <ion-item detail-none>
        {{'BUS_DETAIL_PAGE.NumberPlate' | translate}}
        <ion-note item-right>{{bus?.numberPlate}}</ion-note>
      </ion-item>
      <ion-item detail-none>
        {{'BUS_DETAIL_PAGE.TotalSeats' | translate}}
        <ion-note item-right>{{bus?.totalSeats}}</ion-note>
      </ion-item>
      <ion-item detail-none>
        {{'BUS_DETAIL_PAGE.FreeSeats' | translate}}
        <ion-note item-right>{{(bus?.totalSeats || 0) - (realTimeData?.takenSeats || 0)}}</ion-note>
      </ion-item>
      <div class="picture">
        <!-- fix for iOS -->
        <!--<div style="background-image: url({{bus?.picture}});">-->
        <img src="{{bus?.picture}}">
        <!--</div>-->
        <figcaption></figcaption>
      </div>
    </div>

    <div class="map" *ngSwitchWhen="'position'">
      <div class="estimation">
        {{schedule?.arrivingTime?.toDate() | date:'Hms'}}
        <span *ngIf="realTimeData.delay" class="delay">+{{realTimeData.delay}}</span>
      </div>
      <native-map style="width: 100%; height: 100%; flex: 1 1 auto; display: flex;">
      </native-map>
    </div>

  </div>
</ion-content>
